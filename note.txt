sync && echo 3 > /proc/sys/vm/drop_caches

python: No module named torch.distributed.run
将torch.distributed.run 换成 torch.distributed.launch 即可

yolo task=detect mode=train model=ultralytics/cfg/models/v8/yolov8s.yaml data=ultralytics/data/datasets/coco_v8.yaml name=yolov8s_8gpu batch=128 workers=32 epochs=100 imgsz=640 pretrained=False optimizer=SGD device=\'1,2,3,4,5,6,7,8\' amp=False

yolo task=detect mode=train model=ultralytics/cfg/models/v8/yolov8s.yaml data=ultralytics/data/datasets/coco_v8.yaml name=yolov8s_4gpu batch=64 workers=32 epochs=100 imgsz=640 pretrained=False optimizer=SGD device=\'1,2,3,4\' amp=False

yolo task=detect mode=train model=ultralytics/cfg/models/v5/yolov5s_5x5.yaml data=ultralytics/data/datasets/coco_v8.yaml name=yolov5s_4gpu batch=64 workers=32 epochs=100 imgsz=640 pretrained=False optimizer=SGD device=\'1,2,3,4\' amp=False

yolo task=detect mode=train model=ultralytics/cfg/models/v5/yolov5s_relu.yaml data=ultralytics/data/datasets/coco_v8.yaml name=yolov5s_relu_4gpu batch=64 workers=32 epochs=100 imgsz=640 pretrained=False optimizer=SGD device=\'1,2,3,4\' amp=False

yolo task=detect mode=train model=ultralytics/cfg/models/v5/yolov5s_relu.yaml data=ultralytics/data/datasets/coco_v8.yaml name=yolov5s_relu_4gpu batch=64 workers=32 epochs=100 imgsz=640 pretrained=False resume=True optimizer=SGD device=\'1,2,3,4\' amp=False


yolo task=detect mode=train model=ultralytics/cfg/models/v8/yolov8m.yaml data=ultralytics/cfg/datasets/sida.yaml cfg=ultralytics/cfg/sida.yaml name=yolov8m_sida_4gpu batch=64 workers=32 epochs=100 imgsz=640 pretrained=False resume=False optimizer=SGD device=\'1,2,3,4\' amp=False

yolo task=detect mode=train cfg=ultralytics/cfg/sida.yaml name=yolov8m_sida_4gpu batch=64 workers=32 epochs=100 imgsz=640 optimizer=SGD device=\'1,2,3,4\' amp=False

yolo task=detect mode=train cfg=ultralytics/cfg/sida.yaml name=yolov8m_sida_4gpu batch=64 workers=32 epochs=100 imgsz=640 optimizer=SGD amp=False

yolo task=detect mode=train cfg=ultralytics/cfg/sida.yaml name=yolov8m_sida_4gpu amp=False

yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov8m.yaml data=ultralytics/cfg/datasets/sida.yaml amp=False
yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov8s.yaml data=ultralytics/cfg/datasets/sida.yaml amp=False

yolo task=detect mode=train cfg=ultralytics/cfg/sida.yaml name=yolov8s_sida_8gpu amp=False

yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov8m.yaml amp=False
yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov8m_pre.yaml amp=False

yolo task=detect mode=val name=sida_yolov8m_8gpu_val model=runs/detect/sida_yolov8m_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml
yolo task=detect mode=val name=sida_yolov8m_pre_8gpu_val model=runs/detect/sida_yolov8m_pre_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml

yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov8s.yaml amp=False
yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov8s_pre.yaml amp=False

yolo task=detect mode=val name=sida_yolov8s_8gpu_val model=runs/detect/sida_yolov8s_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml
yolo task=detect mode=val name=sida_yolov8s_pre_8gpu_val model=runs/detect/sida_yolov8s_pre_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml

yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov5s_relu.yaml amp=False
yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov5s_relu_pre.yaml amp=True

yolo task=detect mode=val name=sida_yolov5s_relu_8gpu_val model=runs/detect/sida_yolov5s_relu_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml
yolo task=detect mode=val name=sida_yolov5s_relu_pre_8gpu_val model=runs/detect/sida_yolov5s_relu_pre_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml

yolo task=detect mode=val name=sida_yolov5s_relu_8gpu_val model=runs/detect/sida_yolov5s_relu_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml conf=0.1 iou=0.5 max_det=100
yolo task=detect mode=val name=sida_yolov5s_relu_pre_8gpu_val model=runs/detect/sida_yolov5s_relu_pre_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml conf=0.1 iou=0.5 max_det=100

yolo task=detect mode=val name=sida_yolov5s_relu_8gpu_val model=runs/detect/sida_yolov5s_relu_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida_objects365.yaml
yolo task=detect mode=val name=sida_yolov5s_relu_pre_8gpu_val model=runs/detect/sida_yolov5s_relu_pre_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida_objects365.yaml

yolo task=detect mode=val name=sida_yolov5s_relu_8gpu_val model=runs/detect/sida_yolov5s_relu_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida_objects365.yaml conf=0.1 iou=0.5 max_det=100
yolo task=detect mode=val name=sida_yolov5s_relu_pre_8gpu_val model=runs/detect/sida_yolov5s_relu_pre_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida_objects365.yaml conf=0.1 iou=0.5 max_det=100

yolo task=detect mode=val name=sida_yolov5s_relu_8gpu_val model=runs/detect/sida_yolov5s_relu_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida_objects365.yaml conf=0.1 iou=0.5 max_det=100 save_json=True
yolo task=detect mode=val name=sida_yolov5s_relu_pre_8gpu_val model=runs/detect/sida_yolov5s_relu_pre_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida_objects365.yaml conf=0.1 iou=0.5 max_det=100 save_json=True

yolo task=detect mode=val name=sida_yolov5s_relu_8gpu_val model=runs/detect/sida_yolov5s_relu_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml
yolo task=detect mode=val name=sida_yolov5s_relu_pre_8gpu_val model=runs/detect/sida_yolov5s_relu_pre_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml

yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov8s_relu.yaml amp=False
yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov8s_relu_pre.yaml amp=False

yolo task=detect mode=val name=sida_yolov8s_relu_8gpu_val model=runs/detect/sida_yolov8s_relu_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml
yolo task=detect mode=val name=sida_yolov8s_relu_pre_8gpu_val model=runs/detect/sida_yolov8s_relu_pre_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida.yaml


yolo task=detect mode=train cfg=ultralytics/cfg/coco_yolov5s_relu.yaml amp=False


yolo task=detect mode=predict show=True name=sida_yolov8s_pre_8gpu_video model=runs/detect/sida_yolov8s_pre_8gpu/weights/last.pt source=/media/kasim/DataSet/ElevatorRecord/alarm/alarm_video/MOTO_ENTER_ALARM/290b1000010a05000008393443595350/video1/20221115/20221115_145153_10a0500000839344.mp4


python3 sida/video_detect_mp.py
--base_path
/media/erised/fast-storage/dev/ElevatorRecord/part8
--list_file
/media/erised/fast-storage/dev/ElevatorRecord/part8/video_list8.txt
--out_path
/media/erised/fast-storage/dev/ElevatorRecord/part8_detect_yolov8
--checkpoint
runs/detect/sida_yolov8m_pre_8gpu/weights/last.pt
--imgsz
640
384
--multi_label
--conf_thres
0.1
--proccess_count
32
--gpu_id_offset
1
--gpu_count
8
--batch_size
8
--save_txt


yolo task=detect mode=train data=data=ultralytics/cfg/datasets/coco_v8.yaml cfg=ultralytics/cfg/coco_yolov5s_relu.yaml name=coco_yolov5s_relu_8gpu amp=False

yolo task=detect mode=train data=data=ultralytics/cfg/datasets/coco_v8.yaml cfg=ultralytics/cfg/coco_yolov5s_relu.yaml name=coco_yolov5s_relu_4gpu batch=64 device=\'1,2,3,4\' amp=False

yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov5s_relu.yaml data=ultralytics/cfg/datasets/sida_v1.yaml name=sida_yolov5s_relu_8gpu_v1
yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov5s_relu_pre.yaml data=ultralytics/cfg/datasets/sida_v1.yaml name=sida_yolov5s_relu_pre_8gpu_v1


yolo task=detect mode=train data=ultralytics/cfg/datasets/coco_v8.yaml cfg=ultralytics/cfg/coco_yolov5s_relu.yaml model=ultralytics/cfg/models/v5/yolov5s_relu_sida.yaml name=coco_yolov5s_relu_sida_8gpu
# SidaDetect(NPU) lower mAP
yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov5s_relu_pre.yaml model=runs/detect/coco_yolov5s_relu_sida_8gpu/weights/last.pt x

# OK
yolo task=detect mode=train cfg=ultralytics/cfg/coco_yolov5s_relu.yaml name=coco_yolov5s_relu_8gpu
yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov5s_relu_pre.yaml name=sida_yolov5s_relu_pre_8gpu_v2
yolo task=detect mode=train cfg=ultralytics/cfg/sida_yolov5s_relu_obj.yaml name=sida_yolov5s_relu_obj_8gpu

yolo task=detect mode=val name=sida_yolov8s_relu_pre_8gpu_val model=runs/detect/sida_yolov5s_relu_pre_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida_moto.yaml batch=32 device=\'0\'
yolo task=detect mode=val name=sida_yolov8s_relu_pre_8gpu_v2_val model=runs/detect/sida_yolov5s_relu_pre_8gpu_v2/weights/last.pt data=ultralytics/cfg/datasets/sida_moto.yaml batch=32 device=\'0\'

#！/bin/bash
apt-get update && apt-get install wget
wget https://dl.google.com/linux/direct/google-chrome-stable_current_amd64.deb
apt-get install -y -f ./google-chrome-stable_current_amd64.deb
sed -e '/chrome/ s/^#*/#/' -i /opt/google/chrome/google-chrome
echo 'exec -a "$0" "$HERE/chrome" "$@" --user-data-dir="$HOME/.config/chrome" --no-sandbox --disable-dev-shm-usage' >> /opt/google/chrome/google-chrome


yolo task=detect mode=export model=/root/git/yolov8/runs/detect/sida_yolov5s_relu_obj_8gpu/weights/best.pt format=onnx opset=11 simplify=True imgsz=(640,640) sida_deploy=True

yolo task=detect mode=val name=sida_yolov8s_relu_8gpu_v1_val model=runs/detect/sida_yolov5s_relu_8gpu_v1/weights/last.pt data=ultralytics/cfg/datasets/sida_objects365.yaml batch=32 device=\'9\'
yolo task=detect mode=val name=sida_yolov8s_relu_pre_8gpu_v2_val model=runs/detect/sida_yolov5s_relu_pre_8gpu_v2/weights/last.pt data=ultralytics/cfg/datasets/sida_objects365.yaml batch=32 device=\'0\'
原目标检测模型：
objects365验证集：
                 Class     Images  Instances      Box(P          R      mAP50  mAP50-95):
                   all       1886      11288      0.731      0.548      0.612      0.444
                person       1886       5994       0.82      0.693      0.783      0.557
                  face       1886       2414      0.926      0.886      0.949      0.728
                   cat       1886        265      0.773      0.758      0.827      0.671
                   dog       1886        522      0.869       0.67      0.764      0.593
         baby_carriage       1886         93      0.679      0.398      0.497      0.359
               bicycle       1886        596       0.82      0.624      0.708      0.516
            motorcycle       1886        489      0.858      0.638      0.712       0.53
              tricycle       1886         34      0.335      0.163      0.132     0.0933
            wheelchair       1886         45      0.709      0.667      0.705      0.432
               trolley       1886        261      0.566       0.37      0.379      0.235
            cell phone       1886        575      0.687      0.158      0.281      0.172

yolo task=detect mode=val name=sida_yolov5s_relu_obj_8gpu_objects365_val model=runs/detect/sida_yolov5s_relu_obj_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida_objects365_val.yaml batch=32 device=\'0\'
yolo task=detect mode=val name=sida_yolov5s_relu_obj_8gpu_object_coco_val model=runs/detect/sida_yolov5s_relu_obj_8gpu/weights/last.pt data=ultralytics/cfg/datasets/sida_object_coco_val.yaml batch=32 device=\'0\'
